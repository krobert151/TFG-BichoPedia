<div class="row bg-olive-dark py-5">
    <div class="col"></div>
    <div class="card p-0 h-100 col-10">
        <div class="card">
            <p-toast></p-toast>
            <div class="d-flex justify-content-end mb-2">
                <p-button icon="pi pi-plus" label="Add" ></p-button>
            </div>
            <p-table  [value]="usersResponses" [tableStyle]="{'min-width': '60rem'}" >
                <ng-template pTemplate="header">
                    <tr>
                        <th  style="width:20%">
                            Photo 
                        </th>
                        <th  style="width:20%">
                            Username
                        </th>
                        <th style="width:20%">
                            Email 
                        </th>
                        <th  style="width:20%">
                            Roles 
                        </th>
                        <th style="width:20%">
                            Options
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-user>
                    <tr>
                        <td><img [src]="getPhoto(user.profilePhoto,60,60)" alt=""> </td>
                        <td>{{ user.username }}</td>
                        <td>{{ user.email }}</td>
                        <td> 
                            <p-button label="ADMIN" [severity]="user.roles.includes('ADMIN') ? 'success' : 'danger'" (onClick)="changePermissions(user,'ADMIN')"></p-button>
                            <p-button label="WRITER" [severity]="user.roles.includes('WRITER') ? 'success' : 'danger'" (onClick)="changePermissions(user,'WRITER')"></p-button>
                            <p-button label="USER" [severity]="user.roles.includes('USER') ? 'success' : 'danger'" (onClick)="showPermissionsOptions(user.id)">  </p-button>
                        </td>
                        <td>
                            <div>
                            </div>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
    <div class="col"></div>
    <p-dialog [(visible)]="userPermissionsModal" [modal]="true">
        <form class="flex align-items-center gap-1" [formGroup]="userPermissionsForm">
            <div style="display: flex;">
                <p-inputSwitch formControlName="accountNonExpired" />
                <p> Account Non Expired</p>
            </div>
            <div style="display: flex;">
                <p-inputSwitch formControlName="accountNonLocked" />
                <p> Account Non Locked</p>
            </div>
            <div style="display: flex;">
                <p-inputSwitch formControlName="credentialsNonExpired" />
                <p> Credentials Non Expired</p>
            </div>
            <div style="display: flex;">
                <p-inputSwitch formControlName="enabled" />
                <p> Enabled</p>
            </div>
            <div style="display: flex; justify-content: center;">
                <p-button label="Save" (click)="saveUserPermissions()"></p-button>
            </div>
        </form>
    </p-dialog>
</div>